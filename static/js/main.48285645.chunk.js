(this["webpackJsonpbike-locator-app"]=this["webpackJsonpbike-locator-app"]||[]).push([[0],{44:function(e,t,n){},46:function(e,t,n){},56:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),s=n.n(r),i=n(4),o=n(10),l=n.n(o),u=n(37),j=n(13),d=n(5),b=n(24),h=(n(44),n(79)),O=n(80),p=n(81),f=n(82),x=n(83),m=n(12),k=n.p+"static/media/bicycle-solid.76ee6971.svg",v=(n(45),n(46),n(1)),w={hideDetails:!0},g=Object(c.createContext)({state:w,dispatch:function(){return null}}),N=function(){return Object(c.useContext)(g)},y=function(e){return{type:"HIDE_DETAILS",payload:{isHidden:e}}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.payload.isHidden;switch(t.type){case"HIDE_DETAILS":return Object(i.a)(Object(i.a)({},e),{},{hideDetails:n});default:return e}},D=function(e){var t=e.children,n=Object(c.useReducer)(S,w),a=Object(d.a)(n,2),r={state:a[0],dispatch:a[1]};return Object(v.jsx)(g.Provider,{value:r,children:t})},C=[40.463667,-3.74922],_=function(e){var t=e.networkDetails,n=e.networkStation,c=e.setNetworkStation,a=N(),r=a.state,s=a.dispatch,o=function(e){var t=e.center,n=e.zoom;return Object(h.a)().flyTo(t,n),null},l=new m.Icon({iconUrl:k,iconRetinaUrl:k,popupAnchor:[2,-20],iconSize:[24,24],className:"map-marker-icon"});return Object(v.jsxs)("div",{className:"map-wrapper",children:[Object(v.jsxs)(O.a,{className:"map",center:Object.keys(t).length?[t.location.latitude,t.location.longitude]:C,zoom:Object.keys(t).length?15:6,scrollWheelZoom:!1,children:[Object(v.jsx)(o,{center:Object.keys(t).length?Object.keys(n).length?[n.latitude,n.longitude]:[t.location.latitude,t.location.longitude]:C,zoom:Object.keys(t).length?Object.keys(n).length?14:15:6}),!!Object.keys(t).length&&t.stations.map((function(e){return Object(v.jsx)(p.a,{position:[e.latitude,e.longitude],icon:l,children:Object(v.jsx)(f.a,{onOpen:function(){return function(e){c(Object(i.a)({},e)),s(y(!1))}(e)},children:e.name})},e.id)})),Object(v.jsx)(x.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png"})]}),Object(v.jsxs)("div",{className:"map-details".concat(r.hideDetails?" hide":""),children:[Object(v.jsx)("button",{className:"map-details-button",onClick:function(){s(y(!r.hideDetails))},children:Object(v.jsx)("p",{className:r.hideDetails?"inverted":"",children:"v"})}),Object(v.jsx)("div",{className:"map-details-container",children:Object.keys(t).length?Object.keys(n).length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"map-details-container__heading",children:Object(v.jsx)("h3",{children:n.name})}),Object(v.jsxs)("p",{children:["Empty slots: ",n.empty_slots]}),Object(v.jsxs)("p",{children:["Free bikes: ",n.free_bikes]})]}):!r.hideDetails&&Object(v.jsx)("p",{children:"No station selected. Please, choose one."}):!r.hideDetails&&Object(v.jsx)("p",{children:"No city selected. Please, choose one."})})]})]})},I=n(2),E=function(e){var t=e.networks,n=e.getNetworkDetails,c=e.clearSearchInput,a=Object(I.f)();return Object(v.jsx)("ul",{className:"sidebar-main-results",children:t.length?t.map((function(e){var t=e.id,r=e.location.city;return Object(v.jsx)("li",{className:"sidebar-main-results__item",onClick:function(){return function(e){c(),n(e),a.push("/stations/:".concat(e))}(t)},children:Object(v.jsx)("p",{children:r})},t)})):Object(v.jsx)("p",{children:"No results\u2026"})})},L=function(e){var t=e.networkDetails,n=e.setNetworkStation,a=e.getNetworkDetails,r=e.clearSearchInput,s=Object(I.h)().id,o=Object(c.useState)(),l=Object(d.a)(o,2),u=l[0],j=l[1];return Object(c.useEffect)((function(){var e=s.slice(1);a(e)}),[s]),Object(v.jsx)("ul",{className:"sidebar-main-results",children:Object.keys(t).length&&0!==t.stations.length?t.stations.map((function(e){return Object(v.jsx)("li",{className:"sidebar-main-results__item".concat(u===e.id?" active":""),onClick:function(){j(e.id),n(Object(i.a)({},e)),r()},children:Object(v.jsx)("p",{children:e.name})},e.id)})):Object(v.jsx)("p",{children:"No results\u2026"})})},F=(n(56),function(e){var t=e.networks,n=e.networkDetails,a=e.getNetworkDetails,r=e.setNetworkStation,s=e.setNetworkDetails,o=Object(I.f)(),l=Object(I.g)(),u=N().dispatch,j=Object(c.useState)(""),b=Object(d.a)(j,2),h=b[0],O=b[1],p=Object(c.useState)(!1),f=Object(d.a)(p,2),x=f[0],m=f[1],k=Object(c.useState)(),w=Object(d.a)(k,2),g=w[0],S=w[1],D=Object(c.useState)(),C=Object(d.a)(D,2),_=C[0],F=C[1],z="/"===l.pathname,P=z?"Choose a city":"Choose a station",T=function(){O("")},A=function(e){return t.filter((function(t){return t.location.city.toLowerCase().includes(e)}))},B=function(e){return Object(i.a)(Object(i.a)({},n),{},{stations:n.stations.filter((function(t){return t.name.toLowerCase().includes(e)}))})};return Object(v.jsxs)("div",{className:"sidebar",children:[Object(v.jsxs)("div",{className:"sidebar-header",children:[Object(v.jsx)("div",{className:"sidebar-header-logo",children:Object(v.jsx)("h1",{children:"Bike Locator App"})}),Object(v.jsx)("div",{className:"sidebar-header-title",children:Object(v.jsx)("h2",{children:P})}),Object(v.jsxs)("div",{className:"sidebar-header-search".concat(x?" focus":"").concat(h?"":" icon-hidden"),onFocus:function(){return m(!0)},onBlur:function(){return m(!1)},children:[Object(v.jsx)("input",{value:h,onChange:function(e){var t=e.target.value;if(O(t),z){var n=A(t);return S(n)}var c=B(t);F(c)},placeholder:z?"Search for a city\u2026":"Search for a station\u2026"}),Object(v.jsx)("div",{className:"sidebar-header-search__icon",onClick:T})]})]}),Object(v.jsx)("div",{className:"sidebar-main",children:Object(v.jsxs)(I.c,{children:[Object(v.jsx)(I.a,{exact:!0,path:"/",children:Object(v.jsx)(E,{networks:g||t,getNetworkDetails:a,clearSearchInput:T})}),Object(v.jsx)(I.a,{path:"/stations/:id",children:Object(v.jsx)(L,{networkDetails:_||n,setNetworkStation:r,getNetworkDetails:a,clearSearchInput:T})})]})}),Object(v.jsx)("div",{className:"sidebar-footer",children:Object(v.jsx)("button",{className:"sidebar-footer-button".concat(z?" disabled":""),disabled:z,onClick:function(){T(),r({}),s({}),o.push("/"),u(y(!0))},children:Object(v.jsx)("p",{children:"Volver atr\xe1s"})})})]})}),z=n(36),P=n.n(z).a.create({baseURL:"http://api.citybik.es/v2/networks/"}),T=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/");case 2:if(n=e.sent,c=n.data.networks,!t){e.next=6;break}return e.abrupt("return",c.filter((function(e){return e.location.country===t})));case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return n=e.sent,c=n.data.network,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({}),s=Object(d.a)(r,2),o=s[0],h=s[1],O=Object(c.useState)({}),p=Object(d.a)(O,2),f=p[0],x=p[1],m=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("ES");case 2:t=e.sent,a(Object(u.a)(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:n=e.sent,h(Object(i.a)({},n)),x({});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){m()}),[]),Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(b.a,{children:Object(v.jsx)(F,{networks:n,networkDetails:o,getNetworkDetails:k,setNetworkStation:x,setNetworkDetails:h})}),Object(v.jsx)(_,{networkDetails:o,networkStation:f,setNetworkStation:x})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(75),n(76);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(D,{children:Object(v.jsx)(B,{})})}),document.getElementById("root")),H()}},[[77,1,2]]]);
//# sourceMappingURL=main.48285645.chunk.js.map